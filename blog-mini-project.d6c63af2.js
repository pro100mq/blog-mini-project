async function t(){try{return await fetch("http://localhost:3000/blog").then(t=>t.json())}catch(t){console.log(t)}}async function e(t){try{return await fetch("http://localhost:3000/blog",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...t})}).then(t=>t.json())}catch(t){console.log(t)}}async function n(t,e){try{return await fetch(`http://localhost:3000/blog/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,updatedAt:new Date().toISOString()})}).then(t=>t.json())}catch(t){console.log(t)}}async function o(t){try{return await fetch(`http://localhost:3000/blog/${t}`,{method:"DELETE"})}catch(t){console.log(t)}}function a(t,e){e.innerHTML=t.map(t=>`
    <div class="post" data-id="${t.id}">
      <h2>${t.title}</h2>
      <p>\u{410}\u{432}\u{442}\u{43E}\u{440}: ${t.username}</p>
      <img src="${t.imageUrl}" alt="${t.title}">
      <p>${t.content}</p>
      <button class="edit-btn" data-id="${t.id}">\u{420}\u{435}\u{434}\u{430}\u{433}\u{443}\u{432}\u{430}\u{442}\u{438}</button>
      <button class="delete-btn" data-id="${t.id}">\u{412}\u{438}\u{434}\u{430}\u{43B}\u{438}\u{442}\u{438}</button>
    </div>
  `).join("")}const l=document.getElementById("postsContainer"),c=document.getElementById("openModalBtn"),u=document.getElementById("modalBackdrop"),i=document.getElementById("modalTitle"),d=document.getElementById("postForm"),s=document.querySelector(".modal-cancel-btn");let r=null,m=[];async function y(o){o.preventDefault();let c={username:document.getElementById("usernameInput").value.trim(),title:document.getElementById("postTitleInput").value.trim(),content:document.getElementById("postContentInput").value.trim(),imageUrl:document.getElementById("photoURLInput").value.trim()};try{r?await n(r,c):await e(c),m=await t(),a(m,l),h()}catch(t){console.log(t)}}async function p(t){try{let e=m.find(e=>e.id==t);if(!e)return;r=t,i.textContent="Редагувати пост",document.getElementById("usernameInput").value=e.username,document.getElementById("postTitleInput").value=e.title,document.getElementById("postContentInput").value=e.content,document.getElementById("photoURLInput").value=e.imageUrl,u.style.display="flex"}catch(t){console.log(t)}}async function g(e){alert("Ви хочете видалити цей пост?");try{await o(e),m=await t(),a(m,l)}catch(t){console.log(t)}}function h(){u.style.display="none"}(async function e(){try{m=await t(),c.addEventListener("click",()=>{r=null,i.textContent="Створити пост",d.reset(),u.style.display="flex"}),s.addEventListener("click",h),u.addEventListener("click",t=>{t.target===u&&h()}),d.addEventListener("submit",y),l.addEventListener("click",async t=>{let e=t.target.closest("[data-id]")?.dataset.id;e&&(t.target.closest(".edit-btn")?await p(e):t.target.closest(".delete-btn")&&await g(e))})}catch(t){console.log(t)}})();
//# sourceMappingURL=blog-mini-project.d6c63af2.js.map
